<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8 text-center">
      <h1 class="mb-4">这是一个简易的校园活动管理系统</h1>
      <p>你可以在这里查看活动信息，报名参加活动，以及查看自己的报名情况。</p>
      <button type="button"
              class="btn btn-success"
              data-action="test-toast">
        测试 Toast
      </button>
      <% if Current.user %>
        <p>欢迎回来, <%= Current.user.username %></p>
        <%= button_to "登出", Current.session, method: :delete, class: "btn btn-danger mx-2" %>
      <% else %>
        <div class="mt-4">
          <%= link_to "注册", sign_up_path, class: "btn btn-primary mx-2" %>
          <%= link_to "登录", sign_in_path, class: "btn btn-outline-primary mx-2" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<% content_for :page_scripts do %>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const button = document.querySelector('[data-action="test-toast"]')
  button.addEventListener('click', (e) => {
    console.log('Button clicked')
    showToast({
      message: '这是一个测试 Toast',
      type: 'success',
      delay: 2000
    })
  })
})
</script>
<% end %>

<%# <p style="color: green"><%= notice %></p>

<%# <p>Signed as <%= Current.user.email %></p>

<%# <h2>Login and verification</h2> %>

<%# <div> %>
  <%# <%= link_to "Change password", edit_password_path %>
<%# </div> %>

<%# <div> %>
  <%# <%= link_to "Change email address", edit_identity_email_path %>
<%# </div> %>

<%# <h2>Access history</h2> %>

<%# <div> %>
  <%# <%= link_to "Devices & Sessions", sessions_path %>
<%# </div> %>

<%# <br> %>

<%# <%= button_to "Log out", Current.session, method: :delete %>
